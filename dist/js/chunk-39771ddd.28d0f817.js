(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39771ddd"],{"0864":function(e,t,r){},4020:function(e,t,r){"use strict";var a=r("0e6f"),s=r("03bd").includes,i=r("8276");a({target:"Array",proto:!0},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},"4b89":function(e,t,r){"use strict";var a=r("0864"),s=r.n(a);s.a},"4da2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAWBAMAAAA7hAFPAAAAMFBMVEVHcExmZmZmZmZlZWVmZmZmZmZlZWVfX19mZmZmZmZkZGRlZWVlZWVlZWVmZmZmZmY2PtA4AAAAEHRSTlMAfe6SaacgCLWEN8bWSFqclHmg7AAAAIlJREFUCNdjYGDg+r3/AgMQsO2RvXhmAZBx6QEDA68eUEALJJy0gIFVAMTg28CQVABiMJxieAqmGUwYnBkYODYwMEwEMVp/QBgcAaztYEYoA0MEmJEONAyiBgSwMd7DGGsgjF4GHrCjuNQZ+I6DGNUODAzWCQwM7K1ADqNiepmTAUg4X0kpioEBAOJzICZ4Dz1hAAAAAElFTkSuQmCC"},"522e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAWCAMAAAD+dOxOAAAANlBMVEVHcExmZmZlZWVmZmZlZWVmZmZlZWVmZmZmZmZmZmZlZWVmZmZgYGBlZWVlZWVlZWVaWlpmZmaZa7anAAAAEnRSTlMAuFrMFoQ5ft1qkqAK8UiQBCZeuLLuAAAAjUlEQVQY041QSQ7EIAzLVgjD/v/Plq3AcSJBsGWCDUArsRyjPgKrXPQmBJOjndhqnQfh3FvSLQ1KbWeCXUZLWwdDwQTkLwKyA/e7icf+SUiYPjbhfekG+VxB3w3LNQP9wNdQnAEasYwF+YzVWK5n2TSxO5i4J4z1w6Jp0LP18EucFMkYQt0/UwiZ0Y0AL0CxBE3ezRTxAAAAAElFTkSuQmCC"},6106:function(e,t,r){"use strict";var a=r("0e6f"),s=r("20aa"),i=r("350f"),n=r("f1c6");a({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(i(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"61fe":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"setUserInfo"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"card bgcfff"},[a("p",{staticClass:"card-title",on:{click:function(t){e.show1=!e.show1}}},[a("span",{staticClass:"fs18"},[e._v("修改基本信息")]),a("span",[a("img",{directives:[{name:"show",rawName:"v-show",value:!e.show1,expression:"!show1"}],attrs:{src:r("522e"),alt:""}}),a("img",{directives:[{name:"show",rawName:"v-show",value:e.show1,expression:"show1"}],attrs:{src:r("4da2"),alt:""}})])]),a("transition",{attrs:{name:"slide-fade"}},[e.show1?a("div",{staticClass:"personal-info"},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("uploadImg",{attrs:{src:e.regForm.head_img},on:{getUploadimg:e.getUploadimg}}),a("br"),a("br")],1),a("el-form",{ref:"personForm",staticClass:"modify",attrs:{"label-position":"top","label-width":"80px","hide-required-asterisk":"",model:e.regForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"真实姓名（必填项）",clearable:""},model:{value:e.regForm.name,callback:function(t){e.$set(e.regForm,"name",t)},expression:"regForm.name"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{attrs:{placeholder:"必填项"},model:{value:e.regForm.sex,callback:function(t){e.$set(e.regForm,"sex",t)},expression:"regForm.sex"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1),a("el-form-item",{attrs:{label:"生日（年月日）",prop:"birth"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"必选项",format:"yyyy 年 MM 月 dd 日","value-format":"timestamp"},model:{value:e.regForm.birth,callback:function(t){e.$set(e.regForm,"birth",t)},expression:"regForm.birth"}})],1),a("el-form-item",{attrs:{label:"身高（cm）",prop:"height"}},[a("el-input",{attrs:{placeholder:"必填项，如170.5",clearable:""},model:{value:e.regForm.height,callback:function(t){e.$set(e.regForm,"height",t)},expression:"regForm.height"}})],1),a("el-form-item",{attrs:{label:"体重（kg）",prop:"weight"}},[a("el-input",{attrs:{placeholder:"必填项，如50.75",clearable:""},model:{value:e.regForm.weight,callback:function(t){e.$set(e.regForm,"weight",t)},expression:"regForm.weight"}})],1),a("el-form-item",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("personForm")}}},[e._v("保存修改")])],1)],1)],1):e._e()])],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"card bgcfff"},[a("p",{staticClass:"card-title",on:{click:function(t){e.show2=!e.show2}}},[a("span",{staticClass:"fs18"},[e._v("修改登录密码")]),a("span",[a("img",{attrs:{src:r("522e"),alt:""}})])]),a("transition",{attrs:{name:"slide-fade"}},[e.show2?a("div",{staticClass:"personal-info"},[a("el-form",{ref:"passwordForm",staticClass:"modify",attrs:{"label-position":"top","label-width":"80px","hide-required-asterisk":"",model:e.passwordForm,rules:e.PwdRules}},[a("el-form-item",{attrs:{label:"旧密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入旧密码",maxlength:"30","suffix-icon":e.isOpen1?"iconfont icon-faxian-yanjing":"iconfont icon-guanbi-yanjing",type:e.isOpen1?"text":"password",clearable:""},nativeOn:{click:function(t){return e.changeEye(1,t)}},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[a("el-input",{attrs:{placeholder:"请输入新密码",maxlength:"30","suffix-icon":e.isOpen2?"iconfont icon-faxian-yanjing":"iconfont icon-guanbi-yanjing",type:e.isOpen2?"text":"password",clearable:""},nativeOn:{click:function(t){return e.changeEye(2,t)}},model:{value:e.passwordForm.newPwd,callback:function(t){e.$set(e.passwordForm,"newPwd",t)},expression:"passwordForm.newPwd"}})],1),a("el-form-item",{attrs:{label:"重复新密码",prop:"confimNewPwd"}},[a("el-input",{attrs:{placeholder:"重复输入新密码",maxlength:"30",clearable:"","suffix-icon":e.isOpen3?"iconfont icon-faxian-yanjing":"iconfont icon-guanbi-yanjing",type:e.isOpen3?"text":"password"},nativeOn:{click:function(t){return e.changeEye(3,t)}},model:{value:e.passwordForm.confimNewPwd,callback:function(t){e.$set(e.passwordForm,"confimNewPwd",t)},expression:"passwordForm.confimNewPwd"}})],1),a("el-form-item",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("passwordForm")}}},[e._v("保存修改")])],1)],1)],1):e._e()])],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"card bgcfff"},[a("p",{staticClass:"card-title",on:{click:function(t){return e.$router.push({name:"mobileModify"})}}},[a("span",{staticClass:"fs18"},[e._v("修改手机号")])])])])],1)],1)},s=[],i=(r("66af"),r("4861"),r("4020"),r("0d15"),r("69ab"),r("b84e"),r("c5c0"),r("59db"),r("6106"),r("b5cf"),r("9d37")),n=r("61f7"),o=r("08c1"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.allData.percentShow,expression:"allData.percentShow"}],staticClass:"uploadImg_Box"},[r("div",{staticClass:"fileTitle",staticStyle:{height:"100%"}},[r("uploadView",{staticStyle:{height:"100%"},on:{uploadSuccess:e.uploadSuccess},model:{value:e.allData,callback:function(t){e.allData=t},expression:"allData"}},[r("div",{staticClass:"uploadImgUrl",staticStyle:{height:"100%"}},[r("div",{staticClass:"uploadShadow"},[r("i",{staticClass:"el-icon-plus"})]),r("img",{attrs:{src:e.currentSrc,alt:""}})])])],1)])},c=[],m=(r("c5ee"),r("31c6")),p={name:"upload-img",data:function(){return{allData:{fileList:{fileName:"",fileType:"",file_url:""},accpetType:["png","jpeg","jpg"],fileSize:"800",percentage:0,percentShow:!1},currentSrc:""}},props:{src:{type:[String],default:null}},created:function(){this.currentSrc=this.src},watch:{currentSrc:function(e){}},components:{uploadView:m["a"]},methods:{uploadSuccess:function(e){this.currentSrc=e.file_url,this.$emit("getUploadimg",e.file_url)}}},d=p,u=(r("4b89"),r("5511")),f=Object(u["a"])(d,l,c,!1,null,"1b85b192",null),g=f.exports;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={name:"setUserInfo",components:{uploadImg:g},data:function(){var e=this,t=function(t,r,a){""===r?a(new Error("请再次输入新密码")):r!==e.passwordForm.newPwd?a(new Error("两次输入密码不一致!")):a()},r=function(t,r,a){""===r?a(new Error("请输入新密码")):r===e.passwordForm.password?a(new Error("新密码与旧密码一致!")):(""!==e.passwordForm.confimNewPwd&&e.$refs.passwordForm.validateField("confimNewPwd"),a())};return{isOpen1:!1,isOpen2:!1,isOpen3:!1,show1:!0,show2:!1,regForm:{name:"",sex:"",birth:"",height:"",weight:"",head_img:""},rules:{name:[n["a"].verifyRequired("姓名不能为空！")],sex:[n["a"].verifyRequired("性别不能为空！")],birth:[n["a"].verifyRequired("生日不能为空！")],height:[n["a"].verifyRequired("身高不能为空！")],weight:[n["a"].verifyRequired("体重不能为空！")]},passwordForm:{password:"",newPwd:"",confimNewPwd:""},PwdRules:{password:[n["a"].verifyRequired("旧密码不能为空！")],newPwd:[{validator:n["a"].verifyPwd,trigger:"change"},{validator:r,trigger:"blur"}],confimNewPwd:[{validator:t,trigger:"blur"}]}}},methods:{showFrom:function(){},changeEye:function(e,t){t.target.className.includes("yanjing")&&(1===e?this.isOpen1=!this.isOpen1:2===e?this.isOpen2=!this.isOpen2:this.isOpen3=!this.isOpen3)},getUploadimg:function(e){this.regForm.head_img=e},save:function(e){var t=this;this.$refs[e].validate((function(r){if(!r)return!1;if("personForm"===e){var a=t.regForm,s=a.name,i=a.sex,n=a.birth,o=a.height,l=a.weight,c=a.head_img,m={true_name:s,sex:"男"===i?1:2,height:Number(o),weight:Number(l),birthday:Number(n)/1e3,head_img:c};t.$api["UpdatePersonUser"](m).then((function(e){var r=Object.assign({},t.userInfo);r.personInfo=Object.assign({},r.personInfo,m),t.$store.dispatch("changeUserInfo",r),t.$showMsg("基本信息修改成功！",3)})).catch((function(e){t.$showMsg(e)}))}else{var p=t.passwordForm,d=p.password,u=p.newPwd,f=p.confimNewPwd,g={old_password:d,new_password:u,confirm_password:f};t.$api["UpdatePassword"](g).then((function(e){t.$showMsg("密码修改成功!请重新登录!",3),setTimeout((function(){t.$clearAllUserData.call(t)}),2e3)})).catch((function(e){t.$showMsg(e)}))}}))},backData:function(){var e=this.userInfo.personInfo,t=e.true_name,r=e.sex,a=e.head_img,s=e.birthday,i=e.height,n=e.weight;this.regForm={name:t,sex:1===r?"男":"女",height:i,weight:n,birth:1e3*s,head_img:a||"http://file.pms.sc.cn/1578632117391.png"}}},created:function(){this.backData()},computed:w({},Object(o["b"])(["userInfo"]))},A=b,v=(r("79be"),Object(u["a"])(A,a,s,!1,null,null,null));t["default"]=v.exports},"79be":function(e,t,r){"use strict";var a=r("a40f"),s=r.n(a);s.a},a40f:function(e,t,r){}}]);
//# sourceMappingURL=chunk-39771ddd.28d0f817.js.map