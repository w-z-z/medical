(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22f38a3b"],{"6c94":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"mobileModify"}},[o("h2",{staticClass:"fs24 tc ptb55"},[e._v("修改手机号码")]),o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"01/验证手机号码",disabled:"",name:"1"}},[o("el-form",{ref:"oldFrom",staticClass:"form",attrs:{"hide-required-asterisk":"",rules:e.rules,model:e.oldFrom,"label-position":"top"}},[o("el-form-item",{attrs:{prop:"mobile",label:"手机号码"}},[o("el-input",{attrs:{placeholder:"手机号码",maxlength:"11",clearable:""},model:{value:e.oldFrom.mobile,callback:function(t){e.$set(e.oldFrom,"mobile",t)},expression:"oldFrom.mobile"}})],1),o("el-form-item",{attrs:{prop:"code",label:"验证码"}},[o("el-input",{attrs:{placeholder:"请输入短信验证码",maxlength:"6"},model:{value:e.oldFrom.code,callback:function(t){e.$set(e.oldFrom,"code",t)},expression:"oldFrom.code"}}),o("countDown",{attrs:{className:"get-code",downClass:"countdown",countParams:e.countParams1}})],1),o("el-form-item",{staticClass:"mt60"},[o("el-button",{staticClass:"fl",on:{click:function(t){return e.$router.push({name:"setUserInfo"})}}},[e._v("上一步")]),o("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){return e.nextStep("oldFrom")}}},[e._v("下一步")])],1)],1)],1),o("el-tab-pane",{attrs:{label:"02/设置新手机号码",disabled:"",name:"2"}},[o("el-form",{ref:"newForm",staticClass:"form",attrs:{"hide-required-asterisk":"",rules:e.rules,model:e.newForm,"label-position":"top"}},[o("el-form-item",{attrs:{prop:"mobile",label:"手机号码"}},[o("el-input",{attrs:{placeholder:"手机号码",maxlength:"11",clearable:""},model:{value:e.newForm.mobile,callback:function(t){e.$set(e.newForm,"mobile",t)},expression:"newForm.mobile"}})],1),o("el-form-item",{attrs:{prop:"code",label:"验证码"}},[o("el-input",{attrs:{placeholder:"请输入短信验证码",maxlength:"6"},model:{value:e.newForm.code,callback:function(t){e.$set(e.newForm,"code",t)},expression:"newForm.code"}}),o("countDown",{attrs:{className:"get-code",downClass:"countdown",countParams:e.countParams2}})],1),o("el-form-item",{staticClass:"mt60"},[o("el-button",{staticClass:"fl",on:{click:function(t){e.activeName="1"}}},[e._v("上一步")]),o("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(t){return e.submitModify("newForm")}}},[e._v("验证")])],1)],1)],1)],1)],1)},r=[],n=(o("66af"),o("4861"),o("b84e"),o("c5c0"),o("59db"),o("b5cf"),o("9d37")),i=o("61f7"),s=o("08c1"),l=o("acaa");function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function m(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){Object(n["a"])(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u={components:{countDown:l["a"]},data:function(){return{activeName:"1",isDisabled:!0,countParams1:{api:"SendCodeByOldMobile",params:{mobile:""}},countParams2:{api:"SendCodeByNewMobile",params:{mobile:"",sms_id:""}},oldFrom:{mobile:"",code:""},newForm:{mobile:"",code:""},rules:{mobile:[i["a"].verifyRequired("手机不能为空！"),{validator:i["a"].verifyPhone,trigger:"change"}],code:[i["a"].verifyRequired("短信验证码不能为空！")]}}},methods:{nextStep:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$api["CheckCodeByOldMobile"]({code:t.oldFrom.code}).then((function(e){t.countParams2.params.sms_id=e.sms_id,t.activeName="2"})).catch((function(e){t.$showMsg(e)}))}))},submitModify:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.$api["UpdateMobile"](t.newForm).then((function(e){t.$showMsg("手机号码已变更，请重新登录"),setTimeout((function(){t.$clearAllUserData.call(t)}),2e3)})).catch((function(e){t.$showMsg(e)}))}))}},created:function(){this.oldFrom.mobile=this.userInfo.personInfo.mobile,this.countParams1.params.mobile=this.oldFrom.mobile},computed:m({},Object(s["b"])(["userInfo"])),watch:{"oldFrom.mobile":function(e,t){this.countParams1.params.mobile=e},"newForm.mobile":function(e,t){this.countParams2.params.mobile=e}}},d=u,f=(o("737f"),o("5511")),b=Object(f["a"])(d,a,r,!1,null,null,null);t["default"]=b.exports},"71d6":function(e,t,o){},"737f":function(e,t,o){"use strict";var a=o("71d6"),r=o.n(a);r.a},acaa:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("a",{directives:[{name:"show",rawName:"v-show",value:e.timeShow,expression:"timeShow"}],class:e.className,on:{click:e.sendcode}},[e._v("获取验证码")]),o("a",{directives:[{name:"show",rawName:"v-show",value:!e.timeShow,expression:"!timeShow"}],class:[e.className,e.downClass]},[e._v(e._s(e.time)+" 秒")])])},r=[],n={props:{className:{type:String},downClass:{type:String},countParams:{type:Object}},data:function(){return{timeShow:!0,time:"",timer:null}},methods:{sendcode:_.debounce((function(){var e=this,t=this.countParams,o=t.api,a=t.params,r=/^[1][3,4,5,7,8,9][0-9]{9}$/;a.mobile&&r.test(a.mobile)?this.$api[o](a).then((function(t){var o=59;e.timer||(e.time=o,e.timeShow=!1,e.timer=setInterval((function(){e.time>0&&e.time<=o?e.time--:(e.timeShow=!0,clearInterval(e.timer),e.timer=null)}),1e3))})).catch((function(t){e.$showMsg(t)})):this.$showMsg("请输入正确的手机号码！")}),500,{leading:!0,trailing:!1})}},i=n,s=o("5511"),l=Object(s["a"])(i,a,r,!1,null,"2a999614",null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-22f38a3b.9c96aaa0.js.map